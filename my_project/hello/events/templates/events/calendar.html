{% extends "base.html" %}
{% block content %}
<div id="calendar"></div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const calendar = new FullCalendar.Calendar(document.getElementById('calendar'), {
      initialView: 'dayGridMonth',
      events: [
        {% for event in events %}
        {
          title: '{{ event.title }}',
          start: '{{ event.start|date:"Y-m-d H:i" }}',
          end: '{{ event.end|date:"Y-m-d H:i" }}',
          url: '{% url "events:event_detail" event.pk %}',
          color: '{{ event.event_type.color }}'
        },
        {% endfor %}
      ],
      eventClick: function(info) {
        info.jsEvent.preventDefault();
        window.open(info.event.url, '_blank');
      }
    });
    calendar.render();
  });
</script>
{% endblock %}